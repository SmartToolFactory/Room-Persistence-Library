package com.test.tutorial5_1tablerelations.data


import androidx.room.Entity
import androidx.room.ForeignKey
import androidx.room.ForeignKey.CASCADE
import androidx.room.Index
import androidx.room.PrimaryKey

/**
 * Data class that contains [Pet] data.
 * [User.id] is in [User] class, [userId] is in [Pet] class both points the same value. [Pet.petId] is auto generated by insetion to table.
 *
 * Index let this table to be sorted by userId which makes all rows with same userId to be found faster.
 */

@Entity(
    tableName = "pets",
    indices = [Index(value = ["userId"])],
    foreignKeys = [ForeignKey(
        entity = User::class,
        parentColumns = ["id"],
        childColumns = ["userId"],
        onDelete = CASCADE
    )]
)
class Pet {
    @PrimaryKey(autoGenerate = true)
    var petId: Long = 0     // Pet petId
    var userId: Long = 0 // User id
    var name: String? = null
}
